<html lang="ko" 
    xmlns:th="http://www.thymeleaf.org" 
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
    
		<header th:fragment="header">
			<div class="logo">
				<div>로고</div>
			</div>
			
			<!-- 카테고리 목록 -->
			<ul class="categotry flex-column" id="categoryList">
				<li class="categotry-list" th:each="category : ${categoryList}"><a href="#" th:text="${category.name}"></a></li>
			</ul>
			
			<!-- 카테고리 추가 버튼 -->
			<button type="button" class="btn btn-secondary" id="categoryAddBtn" data-bs-toggle="modal" data-bs-target="#categoryAddModal">카테고리 +</button>
			
			<!-- 글 추가 버튼 -->
			<button type="button" class="btn btn-secondary" id="postAddBtn" data-bs-toggle="modal" data-bs-target="#postAddModal" onclick="openPostModal()">글 +</button>
			
			<!-- 카테고리 추가 모달 -->
			<div class="modal fade" id="categoryAddModal" tabindex="-1" aria-labelledby="categoryAddLabel" aria-hidden="true">
				<div class="modal-dialog modal-dialog-centered">
				    <div class="modal-content">
				    	<div class="modal-header">
				        	<h5 class="modal-title" id="categoryAddLabel">카테고리 추가</h5>
				        	<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				     	</div>
				     	
				      	<div class="modal-body">
				       		<div>카테고리</div>
				       		<input type="text" class="w-100 border-0 border-bottom" id="categoryTitleInput">
				      	</div>
				      
				      	<div class="modal-footer">
				        	<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
				        	<button type="button" class="btn btn-primary" id="categorySaveBtn">확인</button>
				      	</div>
				    </div>
				</div>
			</div>
			
			<!-- 글 추가 모달 -->
			<div class="modal fade" id="postAddModal" tabindex="-1" aria-labelledby="postAddLabel" aria-hidden="true">
				<div class="modal-dialog modal-dialog-centered modal-lg">
					<div class="modal-content">
					
					</div>
				</div>
			</div>
		</header>
		
		<script th:block th:fragment="script">
		
		// 글 추가 모달 열기
		function openPostModal() {
			$('#postAddModal .modal-content').load("/post/create");
			$('#postAddModal').modal();
		}
		
		$(document).ready(function() {
			
			$("#categorySaveBtn").on("click", function() {
				
				let categoryTitle = $("#categoryTitleInput").val();
				
				if(categoryTitle == "") {
					alert("카테고리 제목을 작성하세요");
					return;
				}
				
				$('#categoryAddBtn').on('click', function() {
	                $('#categoryTitleInput').val('');
	            });
				
				$('#categoryAddModal').modal('hide');
				
				$.ajax({
					type:"post"
					, url:"/category/create"
					, data:{"name":categoryTitle}
					, success:function(response) {
						if(response.result == "success") {
							alert("카테고리 생성 성공");
						} else {
							alert("카테고리 생성 실패");
						}
					}
					, error:function() {
						alert("카테고리 생성 에러");
					}
				});
			});
		});
		</script>
</html>